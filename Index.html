<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>My Blogs - Modern Blog Interface</title>
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Phosphor Icons -->
    <script src="https://unpkg.com/@phosphor-icons/web"></script>
    <!-- Google Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&family=Merriweather:ital,wght@0,300;0,400;0,700;1,400&display=swap" rel="stylesheet">

    <script>
        tailwind.config = {
            theme: {
                extend: {
                    fontFamily: {
                        sans: ['Inter', 'sans-serif'],
                        serif: ['Merriweather', 'serif'],
                    },
                    colors: {
                        brand: {
                            50: '#f0f9ff',
                            100: '#e0f2fe',
                            500: '#0ea5e9',
                            600: '#0284c7',
                            900: '#0c4a6e',
                        }
                    },
                    screens: {
                        'xs': '475px',
                    }
                }
            }
        }
    </script>
    <style>
        /* Custom scrollbar for webkit */
        ::-webkit-scrollbar {
            width: 8px;
        }
        ::-webkit-scrollbar-track {
            background: #f1f1f1;
        }
        ::-webkit-scrollbar-thumb {
            background: #cbd5e1;
            border-radius: 4px;
        }
        ::-webkit-scrollbar-thumb:hover {
            background: #94a3b8;
        }
        .fade-enter {
            opacity: 0;
            transform: scale(0.95);
        }
        .fade-enter-active {
            opacity: 1;
            transform: scale(1);
            transition: opacity 200ms, transform 200ms;
        }
    </style>
</head>
<body class="bg-gray-50 text-gray-800 font-sans antialiased flex flex-col min-h-screen">

    <!-- Navigation -->
    <header class="bg-white border-b border-gray-200 sticky top-0 z-50 shadow-sm transition-shadow duration-300">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex justify-between items-center h-16">
                <!-- Logo -->
                <div class="flex-shrink-0 flex items-center gap-2 cursor-pointer select-none" onclick="window.scrollTo(0,0)">
                    <div class="w-8 h-8 bg-brand-600 rounded-lg flex items-center justify-center text-white shadow-sm">
                        <i class="ph-bold ph-newspaper text-xl"></i>
                    </div>
                    <span class="font-bold text-xl tracking-tight text-gray-900">My Blogs</span>
                </div>

                <!-- Desktop Menu -->
                <nav class="hidden md:flex space-x-8">
                    <a href="#" onclick="switchView('home')" id="nav-home" class="text-brand-600 font-medium border-b-2 border-brand-600 px-1 pt-1 h-full flex items-center transition-colors">Home</a>
                    <a href="#" onclick="switchView('yours')" id="nav-yours" class="hidden text-gray-500 hover:text-gray-900 font-medium border-b-2 border-transparent hover:border-gray-300 px-1 pt-1 h-full flex items-center transition-colors">Yours</a>
                </nav>

                <!-- Actions (Desktop) -->
                <div class="hidden md:flex items-center space-x-4" id="desktop-auth-container">
                    <!-- Search -->
                    <div class="relative group mr-2">
                        <input type="text" id="search-input" placeholder="Search..." class="bg-gray-100 border-none rounded-full py-2 pl-4 pr-10 text-sm focus:ring-2 focus:ring-brand-500 w-40 transition-all focus:w-64">
                        <button class="absolute right-3 top-2 text-gray-400 group-hover:text-brand-600 transition-colors">
                            <i class="ph-bold ph-magnifying-glass"></i>
                        </button>
                    </div>
                    
                    <!-- Auth Buttons (Injected via JS) -->
                    <div id="auth-buttons-desktop" class="flex items-center space-x-3">
                        <button onclick="openAuthModal('login')" class="text-gray-600 hover:text-gray-900 font-medium text-sm">Sign In</button>
                        <button onclick="openAuthModal('signup')" class="bg-gray-900 text-white px-5 py-2 rounded-full text-sm font-medium hover:bg-gray-800 transition shadow-sm hover:shadow-md active:scale-95 transform duration-150">
                            Get Started
                        </button>
                    </div>

                    <!-- User Profile (Hidden by default) -->
                    <div id="user-profile-desktop" class="hidden relative">
                        <button onclick="toggleUserDropdown()" class="flex items-center gap-2 focus:outline-none">
                            <img id="user-avatar-desktop" src="" class="w-8 h-8 rounded-full border border-gray-200">
                            <span id="user-name-desktop" class="text-sm font-medium text-gray-700"></span>
                            <i class="ph-bold ph-caret-down text-gray-400"></i>
                        </button>
                        
                        <!-- Dropdown -->
                        <div id="user-dropdown" class="hidden absolute right-0 mt-2 w-48 bg-white rounded-xl shadow-lg border border-gray-100 py-1 z-50 transform origin-top-right transition-all">
                            <a href="#" onclick="openSettingsModal()" class="block px-4 py-2 text-sm text-gray-700 hover:bg-gray-50 flex items-center gap-2">
                                <i class="ph-bold ph-gear"></i> Settings
                            </a>
                            <div class="border-t border-gray-100 my-1"></div>
                            <a href="#" onclick="logout()" class="block px-4 py-2 text-sm text-red-600 hover:bg-red-50 flex items-center gap-2">
                                <i class="ph-bold ph-sign-out"></i> Sign Out
                            </a>
                        </div>
                    </div>
                </div>

                <!-- Mobile menu button -->
                <div class="flex items-center md:hidden">
                    <button id="mobile-menu-btn" class="text-gray-500 hover:text-gray-900 p-2 rounded-md hover:bg-gray-100 transition-colors focus:outline-none focus:ring-2 focus:ring-brand-500">
                        <i class="ph-bold ph-list text-2xl"></i>
                    </button>
                </div>
            </div>
        </div>

        <!-- Mobile Menu Panel (Overlay) -->
        <div id="mobile-menu" class="hidden md:hidden bg-white border-t border-gray-100 absolute w-full shadow-lg z-50">
            <div class="px-4 pt-2 pb-4 space-y-2">
                <a href="#" onclick="switchView('home')" id="mobile-nav-home" class="block px-4 py-3 rounded-xl text-base font-medium text-brand-700 bg-brand-50 border border-brand-100">Home</a>
                <a href="#" onclick="switchView('yours')" id="mobile-nav-yours" class="hidden block px-4 py-3 rounded-xl text-base font-medium text-gray-600 hover:bg-gray-50 border border-transparent">Yours</a>
            </div>
            <div class="p-4 border-t border-gray-100 bg-gray-50">
                <div class="relative mb-4">
                    <input type="text" placeholder="Search articles..." class="w-full bg-white border border-gray-200 rounded-lg py-3 px-4 text-sm focus:ring-2 focus:ring-brand-500 outline-none shadow-sm">
                    <i class="ph-bold ph-magnifying-glass absolute right-3 top-3 text-gray-400"></i>
                </div>
                
                <div id="auth-buttons-mobile" class="space-y-3">
                    <button onclick="openAuthModal('login')" class="w-full bg-white border border-gray-300 text-gray-700 px-4 py-3 rounded-lg text-sm font-bold hover:bg-gray-50 transition-colors">
                        Sign In
                    </button>
                    <button onclick="openAuthModal('signup')" class="w-full bg-brand-600 text-white px-4 py-3 rounded-lg text-sm font-bold hover:bg-brand-700 shadow-md active:bg-brand-800 transition-colors">
                        Get Started
                    </button>
                </div>

                <div id="user-profile-mobile" class="hidden">
                    <div class="flex items-center gap-3 mb-4 px-2">
                        <img id="user-avatar-mobile" src="" class="w-10 h-10 rounded-full border border-gray-200">
                        <div>
                            <p id="user-name-mobile" class="font-bold text-gray-900"></p>
                            <p id="user-email-mobile" class="text-xs text-gray-500"></p>
                        </div>
                    </div>
                    <button onclick="openSettingsModal()" class="w-full text-left px-4 py-3 rounded-lg text-sm font-medium text-gray-700 hover:bg-gray-100 flex items-center gap-2">
                        <i class="ph-bold ph-gear"></i> Settings (API Key)
                    </button>
                    <button onclick="logout()" class="w-full text-left px-4 py-3 rounded-lg text-sm font-medium text-red-600 hover:bg-red-50 flex items-center gap-2">
                        <i class="ph-bold ph-sign-out"></i> Sign Out
                    </button>
                </div>
            </div>
        </div>
    </header>

    <!-- Notification Toast -->
    <div id="toast" class="fixed bottom-5 right-5 bg-gray-900 text-white px-6 py-3 rounded-lg shadow-lg transform translate-y-20 opacity-0 transition-all duration-300 flex items-center gap-3 z-[300]">
        <i class="ph-bold ph-check-circle text-green-400 text-xl"></i>
        <span id="toast-message" class="font-medium text-sm">Action Successful</span>
    </div>

    <!-- Main Content Area -->
    <div class="flex-grow w-full max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8">
        
        <div class="grid grid-cols-1 lg:grid-cols-12 gap-10 lg:gap-12">
            
            <!-- Left Column: Blog Posts -->
            <main class="lg:col-span-8 space-y-8">
                
                <!-- Filters -->
                <div class="flex flex-col sm:flex-row items-start sm:items-center justify-between border-b border-gray-200 pb-4 gap-4 sm:gap-0">
                    <h2 class="text-2xl font-bold text-gray-900 tracking-tight">Latest Articles</h2>
                    <div class="flex items-center gap-4 w-full sm:w-auto">
                        <div class="flex w-full sm:w-auto gap-2">
                            <select id="category-filter" class="w-full sm:w-auto bg-white border border-gray-300 text-gray-700 text-sm rounded-lg focus:ring-brand-500 focus:border-brand-500 block p-2.5 shadow-sm cursor-pointer hover:border-brand-400 transition-colors">
                                <option value="all">All Topics</option>
                                <option value="Personal">Personal</option>
                            </select>
                        </div>
                    </div>
                </div>

                <!-- Posts Grid Container -->
                <div id="posts-container" class="grid gap-6 sm:gap-8">
                    <!-- Posts will be injected here via JS -->
                </div>

                <!-- Pagination -->
                <div class="flex justify-center mt-12">
                    <nav id="pagination-container" class="flex items-center gap-2">
                        <!-- Pagination buttons will be injected here via JS -->
                    </nav>
                </div>
            </main>

            <!-- Right Column: Sidebar -->
            <aside class="lg:col-span-4 space-y-8 lg:sticky lg:top-24 h-fit">
                
                <!-- About Widget -->
                <div class="bg-white p-6 sm:p-8 rounded-2xl border border-gray-100 shadow-sm">
                    <h3 class="font-bold text-lg mb-4 text-gray-900">About My Blogs</h3>
                    <p class="text-gray-600 text-sm leading-relaxed mb-4">
                        We are a community of thinkers, creators, and developers sharing insights on the latest trends in technology and design.
                    </p>
                    <a href="#" class="text-brand-600 text-sm font-semibold hover:text-brand-700 inline-flex items-center group">
                        Read more 
                        <i class="ph-bold ph-arrow-right ml-1 transform group-hover:translate-x-1 transition"></i>
                    </a>
                </div>

                <!-- Categories Widget -->
                <div class="bg-white p-6 sm:p-8 rounded-2xl border border-gray-100 shadow-sm">
                    <h3 class="font-bold text-lg mb-4 text-gray-900">Topics</h3>
                    <div class="flex flex-wrap gap-2">
                        <a href="#" class="px-3 py-1.5 bg-gray-100 text-gray-600 text-xs font-medium rounded-full hover:bg-brand-100 hover:text-brand-700 transition">Personal</a>
                        <a href="#" class="px-3 py-1.5 bg-gray-100 text-gray-600 text-xs font-medium rounded-full hover:bg-brand-100 hover:text-brand-700 transition">Updates</a>
                        <a href="#" class="px-3 py-1.5 bg-gray-100 text-gray-600 text-xs font-medium rounded-full hover:bg-brand-100 hover:text-brand-700 transition">Tech</a>
                        <a href="#" class="px-3 py-1.5 bg-gray-100 text-gray-600 text-xs font-medium rounded-full hover:bg-brand-100 hover:text-brand-700 transition">Life</a>
                    </div>
                </div>

                <!-- Newsletter Widget -->
                <div class="bg-brand-900 p-6 sm:p-8 rounded-2xl text-center text-white shadow-lg relative overflow-hidden">
                    <div class="absolute top-0 right-0 -mr-8 -mt-8 w-24 h-24 rounded-full bg-white opacity-5"></div>
                    
                    <i class="ph-bold ph-envelope-simple text-4xl mb-3 text-brand-400 mx-auto relative z-10"></i>
                    <h3 class="font-bold text-lg mb-2 relative z-10">Weekly Newsletter</h3>
                    <p class="text-brand-100 text-xs mb-5 relative z-10">Get the latest posts delivered right to your inbox. No spam, ever.</p>
                    <form onsubmit="event.preventDefault(); alert('Thanks for subscribing!');" class="relative z-10">
                        <input type="email" placeholder="Your email address" class="w-full px-4 py-2.5 rounded-lg text-gray-900 text-sm mb-3 focus:ring-2 focus:ring-brand-400 border-none outline-none shadow-inner">
                        <button type="submit" class="w-full bg-brand-500 hover:bg-brand-400 text-white font-bold py-2.5 rounded-lg text-sm transition shadow-lg transform active:scale-95">Subscribe</button>
                    </form>
                </div>

            </aside>
        </div>

        <!-- Testimonials Section -->
        <section class="mt-20 border-t border-gray-200 pt-16">
            <div class="text-center mb-12">
                <h2 class="text-3xl font-bold text-gray-900 mb-4 font-serif">What Our Readers Say</h2>
                <p class="text-gray-600 max-w-2xl mx-auto mb-6">Join thousands of developers and creators who start their day with My Blogs.</p>
                <button onclick="openReviewModal()" class="inline-flex items-center gap-2 bg-white border border-gray-300 text-gray-700 px-6 py-2 rounded-full text-sm font-bold hover:bg-gray-50 hover:border-gray-400 transition shadow-sm group">
                    <i class="ph-bold ph-pencil-simple text-brand-600 group-hover:scale-110 transition-transform"></i> Write a Review
                </button>
            </div>
            
            <div id="reviews-container" class="grid grid-cols-1 md:grid-cols-3 gap-8">
                <!-- Reviews will be injected here via JS -->
            </div>
        </section>
    </div>

    <!-- Footer -->
    <footer class="bg-white border-t border-gray-200 pt-16 pb-8 mt-auto">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-4 gap-8 md:gap-12 mb-12">
                <div class="col-span-1 sm:col-span-2 md:col-span-1">
                    <div class="flex items-center gap-2 mb-4">
                        <div class="w-6 h-6 bg-brand-600 rounded flex items-center justify-center text-white text-xs">
                            <i class="ph-bold ph-newspaper"></i>
                        </div>
                        <span class="font-bold text-lg text-gray-900">My Blogs</span>
                    </div>
                    <p class="text-gray-500 text-sm leading-relaxed">Crafting digital experiences that matter and sharing stories from around the web.</p>
                </div>
                <div>
                    <h4 class="font-bold text-gray-900 mb-4">Product</h4>
                    <ul class="space-y-2 text-sm text-gray-500">
                        <li><a href="#" class="hover:text-brand-600 transition">Features</a></li>
                        <li><a href="#" class="hover:text-brand-600 transition">Integrations</a></li>
                        <li><a href="#" class="hover:text-brand-600 transition">Pricing</a></li>
                    </ul>
                </div>
                <div>
                    <h4 class="font-bold text-gray-900 mb-4">Resources</h4>
                    <ul class="space-y-2 text-sm text-gray-500">
                        <li><a href="#" class="hover:text-brand-600 transition">Documentation</a></li>
                        <li><a href="#" class="hover:text-brand-600 transition">API Reference</a></li>
                        <li><a href="#" class="hover:text-brand-600 transition">Community</a></li>
                    </ul>
                </div>
                <div>
                    <h4 class="font-bold text-gray-900 mb-4">Company</h4>
                    <ul class="space-y-2 text-sm text-gray-500">
                        <li><a href="#" class="hover:text-brand-600 transition">About</a></li>
                        <li><a href="#" class="hover:text-brand-600 transition">Blog</a></li>
                        <li><a href="#" class="hover:text-brand-600 transition">Careers</a></li>
                    </ul>
                </div>
            </div>
            <div class="border-t border-gray-100 pt-8 flex flex-col md:flex-row justify-between items-center gap-4">
                <p class="text-gray-400 text-sm text-center md:text-left">Â© 2026 My Blogs UI. All rights reserved.</p>
                <div class="flex space-x-6 items-center">
                    <a href="#" class="text-gray-400 hover:text-brand-500 transition"><i class="ph-bold ph-github-logo text-xl"></i></a>
                    <button onclick="localStorage.clear(); location.reload();" class="ml-4 text-xs text-red-400 hover:text-red-600 underline" title="Clear all local data and reset">Developer Reset</button>
                </div>
            </div>
        </div>
    </footer>

    <!-- Article Modal -->
    <div id="article-modal" class="fixed inset-0 z-[100] hidden" aria-labelledby="modal-title" role="dialog" aria-modal="true">
        <div class="fixed inset-0 bg-gray-900/75 backdrop-blur-sm transition-opacity cursor-pointer" onclick="closeModal()"></div>
        <div class="fixed inset-0 z-10 overflow-y-auto">
            <div class="flex min-h-full items-center justify-center p-4 text-center sm:p-0">
                <div class="relative transform overflow-hidden rounded-2xl bg-white text-left shadow-xl transition-all sm:my-8 sm:w-full sm:max-w-2xl">
                    <button onclick="closeModal()" class="absolute right-4 top-4 p-2 bg-gray-100 hover:bg-gray-200 rounded-full text-gray-500 transition-colors z-10 focus:outline-none focus:ring-2 focus:ring-brand-500">
                        <i class="ph-bold ph-x"></i>
                    </button>
                    <div class="h-64 w-full overflow-hidden">
                        <img id="modal-image" src="" alt="" class="w-full h-full object-cover">
                    </div>
                    <div class="p-6 sm:p-10">
                        <div class="flex items-center justify-between mb-4">
                            <div class="flex items-center gap-3">
                                <span id="modal-category" class="bg-brand-50 text-brand-700 px-3 py-1 rounded-full text-xs font-bold uppercase tracking-wide"></span>
                                <span id="modal-date" class="text-gray-500 text-sm"></span>
                            </div>
                            <div class="flex items-center gap-1.5 text-gray-400 text-sm" title="Total Views">
                                <i class="ph-bold ph-eye text-brand-500"></i>
                                <span id="modal-views" class="font-medium text-gray-600"></span>
                            </div>
                        </div>
                        <h3 id="modal-title" class="text-2xl sm:text-3xl font-bold text-gray-900 mb-6 font-serif"></h3>
                        <div class="prose prose-lg text-gray-600 leading-relaxed" id="modal-content"></div>
                        
                        <!-- Comments Section (New) -->
                        <div class="mt-10 border-t border-gray-100 pt-8">
                            <h4 class="text-xl font-bold text-gray-900 mb-4 font-serif">Discussion</h4>
                            
                            <!-- Comment Form -->
                            <div id="comment-form-container" class="mb-8">
                                <div class="bg-gray-50 rounded-xl p-4 border border-gray-200">
                                    <textarea id="comment-input" rows="3" placeholder="Share your thoughts..." class="w-full bg-transparent border-none focus:ring-0 text-gray-700 text-sm resize-none outline-none"></textarea>
                                    <div class="flex justify-between items-center mt-2 border-t border-gray-200 pt-2">
                                        <p class="text-xs text-gray-400 italic">Please follow Prathamer's Guidelines. Zero tolerance for abuse.</p>
                                        <button onclick="handlePostComment()" class="bg-brand-600 text-white px-4 py-1.5 rounded-lg text-sm font-bold hover:bg-brand-700 transition">Post Comment</button>
                                    </div>
                                </div>
                            </div>
                            <div id="login-to-comment" class="hidden mb-8 text-center py-6 bg-gray-50 rounded-xl border border-dashed border-gray-300">
                                <p class="text-gray-500 text-sm">Please <button onclick="closeModal(); openAuthModal('login')" class="text-brand-600 font-bold hover:underline">sign in</button> to leave a comment.</p>
                            </div>

                            <!-- Comment List (Mock) -->
                            <div id="comments-list" class="space-y-6">
                                <!-- Comments injected here -->
                            </div>
                        </div>

                        <div class="mt-8 border-t border-gray-100 pt-6">
                            <button onclick="closeModal()" class="w-full sm:w-auto bg-gray-100 text-gray-700 px-6 py-2.5 rounded-lg font-medium hover:bg-gray-200 transition">Close Article</button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Auth Modal -->
    <div id="auth-modal" class="fixed inset-0 z-[100] hidden" aria-labelledby="auth-modal-title" role="dialog" aria-modal="true">
        <div class="fixed inset-0 bg-gray-900/75 backdrop-blur-sm transition-opacity cursor-pointer" onclick="closeAuthModal()"></div>
        <div class="fixed inset-0 z-10 overflow-y-auto">
            <div class="flex min-h-full items-center justify-center p-4 text-center sm:p-0">
                <div class="relative transform overflow-hidden rounded-2xl bg-white text-left shadow-xl transition-all sm:my-8 sm:w-full sm:max-w-md">
                    
                    <button onclick="closeAuthModal()" class="absolute right-4 top-4 text-gray-400 hover:text-gray-600">
                        <i class="ph-bold ph-x text-lg"></i>
                    </button>

                    <!-- Auth Content -->
                    <div class="p-8">
                        <div class="text-center mb-8">
                            <div class="w-12 h-12 bg-brand-100 rounded-xl flex items-center justify-center text-brand-600 mx-auto mb-4">
                                <i class="ph-bold ph-user text-2xl"></i>
                            </div>
                            <h3 id="auth-title" class="text-2xl font-bold text-gray-900 mb-1">Welcome Back</h3>
                            <p id="auth-subtitle" class="text-sm text-gray-500">Please enter your details to continue.</p>
                        </div>

                        <!-- Login Form -->
                        <form id="login-form" class="space-y-4" onsubmit="handleLogin(event)">
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-1">Username or Email</label>
                                <input type="text" id="login-identifier" required class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-brand-500 focus:border-brand-500 outline-none">
                            </div>
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-1">Password</label>
                                <input type="password" required class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-brand-500 focus:border-brand-500 outline-none">
                            </div>
                            <button type="submit" class="w-full bg-brand-600 text-white py-2.5 rounded-lg font-bold hover:bg-brand-700 transition shadow-lg">Sign In</button>
                        </form>

                        <!-- Signup Form (Hidden by default) -->
                        <form id="signup-form" class="space-y-4 hidden" onsubmit="handleSignup(event)">
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-1">Username</label>
                                <input type="text" id="signup-name" required class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-brand-500 focus:border-brand-500 outline-none">
                            </div>
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-1">Email (Optional)</label>
                                <input type="email" id="signup-email" placeholder="Required for verification/posts" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-brand-500 focus:border-brand-500 outline-none">
                            </div>
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-1">Password</label>
                                <input type="password" id="signup-password" required class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-brand-500 focus:border-brand-500 outline-none">
                            </div>
                            <button type="submit" class="w-full bg-brand-600 text-white py-2.5 rounded-lg font-bold hover:bg-brand-700 transition shadow-lg">Create Account</button>
                        </form>

                        <!-- Toggle -->
                        <div class="mt-6 text-center text-sm text-gray-600">
                            <span id="auth-switch-text">Don't have an account?</span>
                            <button onclick="toggleAuthMode()" id="auth-switch-btn" class="font-bold text-brand-600 hover:text-brand-800 ml-1">Sign Up</button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Settings/API Key Modal -->
    <div id="settings-modal" class="fixed inset-0 z-[100] hidden" aria-labelledby="settings-modal-title" role="dialog" aria-modal="true">
        <div class="fixed inset-0 bg-gray-900/75 backdrop-blur-sm transition-opacity cursor-pointer" onclick="closeSettingsModal()"></div>
        <div class="fixed inset-0 z-10 overflow-y-auto">
            <div class="flex min-h-full items-center justify-center p-4 text-center sm:p-0">
                <div class="relative transform overflow-hidden rounded-2xl bg-white text-left shadow-xl transition-all sm:my-8 sm:w-full sm:max-w-md">
                    
                    <button onclick="closeSettingsModal()" class="absolute right-4 top-4 text-gray-400 hover:text-gray-600">
                        <i class="ph-bold ph-x text-lg"></i>
                    </button>

                    <div class="p-8">
                        <div class="text-center mb-6">
                            <h3 class="text-2xl font-bold text-gray-900 mb-1">Account Settings</h3>
                            <p class="text-sm text-gray-500">Manage your preferences and keys.</p>
                        </div>

                        <form onsubmit="saveSettings(event)" class="space-y-4">
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-1">Custom API Key</label>
                                <div class="relative">
                                    <div class="absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none">
                                        <i class="ph-bold ph-key text-gray-400"></i>
                                    </div>
                                    <input type="text" id="custom-api-key" placeholder="Enter your API Key" class="w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-brand-500 focus:border-brand-500 outline-none font-mono text-sm">
                                </div>
                                <p class="text-xs text-gray-500 mt-1">This key will be stored securely in your session.</p>
                            </div>
                            <button type="submit" class="w-full bg-gray-900 text-white py-2.5 rounded-lg font-bold hover:bg-gray-800 transition">Save Changes</button>
                        </form>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Review Modal -->
    <div id="review-modal" class="fixed inset-0 z-[100] hidden" aria-labelledby="review-modal-title" role="dialog" aria-modal="true">
        <div class="fixed inset-0 bg-gray-900/75 backdrop-blur-sm transition-opacity cursor-pointer" onclick="closeReviewModal()"></div>
        <div class="fixed inset-0 z-10 overflow-y-auto">
            <div class="flex min-h-full items-center justify-center p-4 text-center sm:p-0">
                <div class="relative transform overflow-hidden rounded-2xl bg-white text-left shadow-xl transition-all sm:my-8 sm:w-full sm:max-w-lg">
                    <button onclick="closeReviewModal()" class="absolute right-4 top-4 text-gray-400 hover:text-gray-600">
                        <i class="ph-bold ph-x text-lg"></i>
                    </button>
                    <div class="p-8">
                        <h3 class="text-2xl font-bold text-gray-900 mb-2 text-center">Write a Review</h3>
                        <p class="text-center text-gray-500 mb-6 text-sm">Share your experience with the community.</p>
                        
                        <form onsubmit="handleReviewSubmit(event)">
                            <div class="mb-5 text-center">
                                <label class="block text-sm font-medium text-gray-700 mb-2">Rating</label>
                                <div class="flex gap-2 justify-center" id="star-rating-input">
                                    <button type="button" onclick="setRating(1)" class="text-3xl text-yellow-400 focus:outline-none star-btn transition-transform hover:scale-110" data-value="1"><i class="ph-fill ph-star"></i></button>
                                    <button type="button" onclick="setRating(2)" class="text-3xl text-yellow-400 focus:outline-none star-btn transition-transform hover:scale-110" data-value="2"><i class="ph-fill ph-star"></i></button>
                                    <button type="button" onclick="setRating(3)" class="text-3xl text-yellow-400 focus:outline-none star-btn transition-transform hover:scale-110" data-value="3"><i class="ph-fill ph-star"></i></button>
                                    <button type="button" onclick="setRating(4)" class="text-3xl text-yellow-400 focus:outline-none star-btn transition-transform hover:scale-110" data-value="4"><i class="ph-fill ph-star"></i></button>
                                    <button type="button" onclick="setRating(5)" class="text-3xl text-yellow-400 focus:outline-none star-btn transition-transform hover:scale-110" data-value="5"><i class="ph-fill ph-star"></i></button>
                                </div>
                                <input type="hidden" id="review-rating" value="5">
                            </div>
                            <div class="mb-6">
                                <label class="block text-sm font-medium text-gray-700 mb-2">Your Feedback</label>
                                <textarea id="review-text" rows="4" required class="w-full px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-brand-500 focus:border-brand-500 outline-none resize-none text-sm" placeholder="What did you like about the blog?"></textarea>
                            </div>
                            <button type="submit" class="w-full bg-brand-600 text-white py-3 rounded-xl font-bold hover:bg-brand-700 transition shadow-lg">Submit Review</button>
                        </form>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Ban Modal (Custom Dialog) -->
    <div id="ban-modal" class="fixed inset-0 z-[200] hidden" aria-labelledby="ban-modal-title" role="dialog" aria-modal="true">
        <div class="fixed inset-0 bg-red-900/90 backdrop-blur-md transition-opacity"></div>
        <div class="fixed inset-0 z-10 overflow-y-auto">
            <div class="flex min-h-full items-center justify-center p-4 text-center sm:p-0">
                <div class="relative transform overflow-hidden rounded-2xl bg-white text-center shadow-2xl transition-all sm:my-8 sm:w-full sm:max-w-md border-t-8 border-red-600" id="ban-modal-panel">
                    <div class="p-8">
                        <div class="w-16 h-16 bg-red-100 rounded-full flex items-center justify-center mx-auto mb-6 animate-pulse" id="ban-icon-bg">
                            <i class="ph-bold ph-warning-octagon text-3xl text-red-600" id="ban-icon"></i>
                        </div>
                        <h3 class="text-2xl font-black text-gray-900 mb-2 uppercase leading-tight" id="ban-title">You are permanently banned</h3>
                        
                        <div id="ban-badge" class="inline-block bg-red-100 text-red-800 text-xs font-black px-3 py-1 rounded-full mb-6 border border-red-200 tracking-widest">
                            RANK: SPAM
                        </div>
                        
                        <p class="text-sm text-gray-500 mb-8 leading-relaxed" id="ban-message">
                            Your account activity violates Prathamer's Strict Guidelines. This action is irreversible.
                        </p>
                        
                        <button onclick="location.reload()" class="w-full bg-gray-900 text-white py-3.5 rounded-xl font-bold hover:bg-black transition shadow-lg uppercase tracking-wide text-sm">
                            Close
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- JavaScript Logic -->
    <script type="module">
        // Declare all state variables at the top to avoid ReferenceErrors
        let currentUser = null;
        let currentPostId = null;
        let currentPage = 1;
        let currentView = 'home';
        let currentFilteredPosts = [];
        let localBans = {};
        let commentsUnsubscribe = null;
        let reviews = [];

        import { initializeApp } from "https://www.gstatic.com/firebasejs/12.7.0/firebase-app.js";
        import { getDatabase, ref, set, push, onValue } from "https://www.gstatic.com/firebasejs/12.7.0/firebase-database.js";

        // --- Firebase Config ---
        const firebaseConfig = {
            apiKey: "AIzaSyCZNXuHg15Ns3ydQ8yd6VOjm58sjfH2dUE",
            authDomain: "prathamersblog.firebaseapp.com",
            databaseURL: "https://my-blog-server-ed755-default-rtdb.firebaseio.com/",
            projectId: "prathamersblog",
            storageBucket: "prathamersblog.firebasestorage.app",
            messagingSenderId: "632179269904",
            appId: "1:632179269904:web:64e4beb224ad1ed79e4595",
            measurementId: "G-HSW8MLPQV8"
        };
        
        const app = initializeApp(firebaseConfig);
        const db = getDatabase(app);

        // --- Data Service (Firebase Realtime Database) ---
        const FirebaseService = {
            // --- BANS ---
            fetchBans: (callback) => {
                const bansRef = ref(db, 'bans');
                return onValue(bansRef, (snapshot) => {
                    const bans = snapshot.val() || {};
                    callback(bans);
                }, (error) => {
                    console.error("Error fetching bans:", error);
                });
            },

            saveBan: async (identifier, type) => {
                const normalizedId = identifier.toLowerCase().replace('.', '_'); // Firebase RTDB keys cannot contain '.'
                try {
                    await set(ref(db, 'bans/' + normalizedId), {
                        timestamp: Date.now(),
                        type: type
                    });
                } catch (e) {
                    console.error("Error saving ban:", e);
                }
            },

            // --- COMMENTS ---
            listenToComments: (postId, callback) => {
                const commentsRef = ref(db, 'comments');
                
                return onValue(commentsRef, (snapshot) => {
                    const data = snapshot.val();
                    const allComments = [];
                    
                    if (data) {
                        for (const key in data) {
                            allComments.push({ id: key, ...data[key] });
                        }
                    }
                    
                    // Client-side filtering for specific post
                    const postComments = allComments
                        .filter(c => c.postId == postId)
                        .sort((a, b) => b.timestamp - a.timestamp); // Newest first
                    
                    callback(postComments);
                }, (error) => {
                    console.error("Error fetching comments:", error);
                });
            },

            saveComment: async (commentData) => {
                try {
                    const commentsRef = ref(db, 'comments');
                    await push(commentsRef, {
                        ...commentData,
                        timestamp: Date.now()
                    });
                } catch (e) {
                    console.error("Error saving comment:", e);
                }
            },

            // --- REVIEWS ---
            listenToReviews: (callback) => {
                const reviewsRef = ref(db, 'reviews');
                return onValue(reviewsRef, (snapshot) => {
                    const data = snapshot.val();
                    const rList = [];
                    if (data) {
                        for (const key in data) {
                            rList.push(data[key]);
                        }
                    }
                    // Reverse to show newest first if timestamp exists, else use default order
                    rList.reverse();
                    callback(rList);
                }, (error) => {
                    console.error("Error fetching reviews:", error);
                });
            },

            saveReview: async (reviewData) => {
                try {
                    const reviewsRef = ref(db, 'reviews');
                    await push(reviewsRef, {
                        ...reviewData,
                        timestamp: Date.now()
                    });
                } catch (e) {
                    console.error("Error saving review:", e);
                }
            }
        };

        // --- Toast Logic ---
        function showToast(message) {
            const toast = document.getElementById('toast');
            const messageEl = document.getElementById('toast-message');
            
            messageEl.textContent = message;
            toast.classList.remove('translate-y-20', 'opacity-0');
            
            setTimeout(() => {
                toast.classList.add('translate-y-20', 'opacity-0');
            }, 3000);
        }

        // --- View State Logic ---
        window.switchView = function(view) {
            currentView = view;
            currentPage = 1; // Reset page on view switch
            
            // Update UI Active States
            const navHome = document.getElementById('nav-home');
            const navYours = document.getElementById('nav-yours');
            const mobileNavHome = document.getElementById('mobile-nav-home');
            const mobileNavYours = document.getElementById('mobile-nav-yours');

            // Reset classes
            const activeClasses = ['text-brand-600', 'border-brand-600'];
            const inactiveClasses = ['text-gray-500', 'border-transparent', 'hover:text-gray-900', 'hover:border-gray-300'];
            
            const mobileActiveClasses = ['text-brand-700', 'bg-brand-50', 'border-brand-100'];
            const mobileInactiveClasses = ['text-gray-600', 'hover:bg-gray-50', 'border-transparent'];

            if (view === 'home') {
                navHome.classList.add(...activeClasses);
                navHome.classList.remove(...inactiveClasses);
                navYours.classList.remove(...activeClasses);
                navYours.classList.add(...inactiveClasses);

                mobileNavHome.classList.add(...mobileActiveClasses);
                mobileNavHome.classList.remove(...mobileInactiveClasses);
                mobileNavYours.classList.remove(...mobileActiveClasses);
                mobileNavYours.classList.add(...mobileInactiveClasses);
            } else {
                navYours.classList.add(...activeClasses);
                navYours.classList.remove(...inactiveClasses);
                navHome.classList.remove(...activeClasses);
                navHome.classList.add(...inactiveClasses);

                mobileNavYours.classList.add(...mobileActiveClasses);
                mobileNavYours.classList.remove(...mobileInactiveClasses);
                mobileNavHome.classList.remove(...mobileActiveClasses);
                mobileNavHome.classList.add(...mobileInactiveClasses);
            }
            
            filterPosts();
            
            // Close mobile menu if open
            document.getElementById('mobile-menu').classList.add('hidden');
            const icon = document.querySelector('#mobile-menu-btn i');
            if(icon) {
                icon.classList.remove('ph-x');
                icon.classList.add('ph-list');
            }
        }

        // --- Strict Guidelines Logic ---
        const badWords = [
            'fuck', 'shit', 'bitch', 'asshole', 'ashole', 'cunt', 'dick', 'bastard', 
            'idiot', 'stupid', 'pennis', 'penis', 'whore', 'slut', 'cock', 'pussy', 
            'motherfucker', 'faggot', 'nigger', 'douche'
        ]; 

        // Init Bans Listener - Global Sync
        FirebaseService.fetchBans((bans) => {
            localBans = bans;
            // Check current user against new ban list
            if (currentUser) {
                // Firebase Keys cannot contain '.', so replace
                const lowerEmailKey = currentUser.email ? currentUser.email.toLowerCase().replace('.', '_') : '';
                const lowerNameKey = currentUser.name.toLowerCase().replace('.', '_');
                
                const emailBan = localBans[lowerEmailKey];
                const nameBan = localBans[lowerNameKey];
                
                if (emailBan || nameBan) {
                    const id = emailBan ? currentUser.email : currentUser.name;
                    logout();
                    showBanModal(id);
                }
            }
        });

        function checkProfanity(text) {
            const lowerText = text.toLowerCase();
            return badWords.some(word => lowerText.includes(word));
        }

        function banUser(identifier, type = 'spam') {
            if (!identifier) return;
            
            // SAVE TO FIREBASE
            FirebaseService.saveBan(identifier, type);

            // Local logout is handled by the listener update or immediate check
            if (currentUser) {
                if ((currentUser.email && currentUser.email.toLowerCase() === identifier.toLowerCase()) || 
                    currentUser.name.toLowerCase() === identifier.toLowerCase()) {
                    logout();
                }
            }
            
            closeAuthModal();
            closeSettingsModal();
            closeModal();
            if(!document.getElementById('review-modal').classList.contains('hidden')) closeReviewModal();

            showBanModal(identifier);
        }

        function showBanModal(identifier) {
            const normalizedId = identifier.toLowerCase().replace('.', '_');
            const banData = localBans[normalizedId];
            
            // Fallback if data hasn't synced yet but we know we just banned them
            const type = banData ? banData.type : 'abuse'; 
            const timestamp = banData ? banData.timestamp : Date.now();

            const modal = document.getElementById('ban-modal');
            const panel = document.getElementById('ban-modal-panel');
            const iconBg = document.getElementById('ban-icon-bg');
            const icon = document.getElementById('ban-icon');
            const title = document.getElementById('ban-title');
            const badge = document.getElementById('ban-badge');
            const message = document.getElementById('ban-message');

            const now = Date.now();
            // Calculate days passed
            const daysPassed = (now - timestamp) / (1000 * 60 * 60 * 24);
            const appealPeriod = 28; // days

            modal.classList.remove('hidden');
            document.body.style.overflow = 'hidden';

            // Reset Styles
            panel.classList.remove('border-red-600', 'border-orange-500');
            iconBg.classList.remove('bg-red-100', 'bg-orange-100');
            icon.classList.remove('text-red-600', 'text-orange-600');
            badge.className = ""; // Reset classes

            if (type === 'spam') {
                // Immediate Permanent Ban (e.g., bad username)
                panel.classList.add('border-red-600');
                iconBg.classList.add('bg-red-100');
                icon.classList.add('text-red-600');
                
                title.textContent = "You are permanently banned";
                badge.textContent = "RANK: SPAM";
                badge.className = "inline-block bg-red-100 text-red-800 text-xs font-black px-3 py-1 rounded-full mb-6 border border-red-200 tracking-widest";
                message.textContent = "Your account activity (Username Violation) violates Prathamer's Strict Guidelines. This action is irreversible.";
            
            } else if (type === 'abuse') {
                // Comment Abuse Logic
                if (daysPassed > appealPeriod) {
                    // PERMANENT (Time expired)
                    panel.classList.add('border-red-600');
                    iconBg.classList.add('bg-red-100');
                    icon.classList.add('text-red-600');

                    title.textContent = "Permanent Ban Enforced";
                    badge.textContent = "APPEAL EXPIRED";
                    badge.className = "inline-block bg-red-100 text-red-800 text-xs font-black px-3 py-1 rounded-full mb-6 border border-red-200 tracking-widest";
                    message.innerHTML = "You failed to contact support within the 28-day window following your temporary suspension. Your account is now <strong>permanently banned</strong>.";
                } else {
                    // TEMPORARY (Still within 28 days)
                    panel.classList.add('border-orange-500');
                    iconBg.classList.add('bg-orange-100');
                    icon.classList.add('text-orange-600');

                    title.textContent = "Account Suspended";
                    badge.textContent = "TEMPORARY BAN";
                    badge.className = "inline-block bg-orange-100 text-orange-800 text-xs font-black px-3 py-1 rounded-full mb-6 border border-orange-200 tracking-widest";
                    
                    const daysLeft = Math.ceil(appealPeriod - daysPassed);
                    
                    message.innerHTML = `
                        You have been temporarily banned for using abusive language in a discussion.
                        <br><br>
                        To restore your access, you <strong>MUST</strong> contact Prathamer's support at:
                        <br>
                        <a href="mailto:ppshenoy2022@gmail.com" class="text-brand-600 font-bold hover:underline">ppshenoy2022@gmail.com</a>
                        <br><br>
                        You have <strong>${daysLeft} days</strong> remaining to appeal. If you do not contact support, this will become a <strong>Permanent Ban</strong>.
                    `;
                }
            }
        }

        // --- Authentication Logic ---
        let users = [
            {
                name: 'Admin',
                email: 'ppshenoy2022@gamil.com',
                role: 'admin',
                avatar: 'https://ui-avatars.com/api/?name=Admin&background=0ea5e9&color=fff'
            },
            {
                name: 'TempUser',
                email: 'temp@pmail.com',
                role: 'user',
                avatar: 'https://ui-avatars.com/api/?name=Temp&background=orange'
            }
        ];

        window.handleLogin = function(e) {
            e.preventDefault();
            
            const inputField = document.getElementById('login-identifier');
            const input = inputField.value.trim();
            const lowerInput = input.toLowerCase();
            const normalizedKey = lowerInput.replace('.', '_'); // RTDB Safe key
            
            // 1. CHECK BAN LIST FIRST (from live sync)
            if (localBans[normalizedKey]) {
                closeAuthModal();
                showBanModal(lowerInput);
                return;
            }

            // Check if user exists in our list by Email OR Username
            let user = users.find(u => 
                (u.email && u.email.toLowerCase() === lowerInput) || 
                u.name.toLowerCase() === lowerInput
            );
            
            if (!user) {
                // Auto-signup logic
                if (input.includes('@')) {
                     user = { 
                        name: input.split('@')[0], 
                        email: input, 
                        role: 'user',
                        avatar: `https://ui-avatars.com/api/?name=${input.split('@')[0]}&background=random`
                    };
                    users.push(user);
                } else {
                    alert("User not found. Please create an account.");
                    return;
                }
            }

            currentUser = user;
            localStorage.setItem('lumina_current_user', JSON.stringify(currentUser));
            updateAuthUI();
            closeAuthModal();
            
            if (currentUser.role === 'admin') {
                alert(`Welcome back, Admin!`);
            } else {
                alert(`Welcome, ${currentUser.name}!`);
            }
        }

        window.handleSignup = function(e) {
            e.preventDefault();
            const name = document.getElementById('signup-name').value.trim();
            const emailInput = document.getElementById('signup-email').value.trim();
            const email = emailInput ? emailInput.toLowerCase() : "";
            
            // 1. CHECK BAN LIST
            const nameKey = name.toLowerCase().replace('.', '_');
            const emailKey = email ? email.replace('.', '_') : '';
            
            if ((email && localBans[emailKey]) || localBans[nameKey]) {
                closeAuthModal();
                showBanModal(email && localBans[emailKey] ? email : name);
                return;
            }

            // 2. CHECK PROFANITY
            if (checkProfanity(name)) {
                banUser(name, 'spam');
                if (email) banUser(email, 'spam');
                return; 
            }
            
            if (email === 'ppshenoy2022@gamil.com') {
                alert("This email is reserved. Please log in instead.");
                return;
            }
            
            const newUser = {
                name: name,
                email: email, 
                role: 'user',
                avatar: `https://ui-avatars.com/api/?name=${name}&background=random`
            };
            
            users.push(newUser);
            currentUser = newUser;
            localStorage.setItem('lumina_current_user', JSON.stringify(currentUser));
            
            updateAuthUI();
            closeAuthModal();
        }

        window.logout = function() {
            currentUser = null;
            localStorage.removeItem('lumina_current_user'); 
            updateAuthUI();
            document.getElementById('user-dropdown').classList.add('hidden');
        }

        function updateAuthUI() {
            const desktopAuth = document.getElementById('auth-buttons-desktop');
            const desktopProfile = document.getElementById('user-profile-desktop');
            const mobileAuth = document.getElementById('auth-buttons-mobile');
            const mobileProfile = document.getElementById('user-profile-mobile');
            const navYours = document.getElementById('nav-yours');
            const mobileNavYours = document.getElementById('mobile-nav-yours');
            const commentForm = document.getElementById('comment-form-container');
            const loginToComment = document.getElementById('login-to-comment');

            if (currentUser) {
                // Logged In
                desktopAuth.classList.add('hidden');
                desktopProfile.classList.remove('hidden');
                
                const roleBadge = currentUser.role === 'admin' ? ' (Admin)' : '';
                document.getElementById('user-name-desktop').textContent = currentUser.name + roleBadge;
                document.getElementById('user-avatar-desktop').src = currentUser.avatar;

                mobileAuth.classList.add('hidden');
                mobileProfile.classList.remove('hidden');
                document.getElementById('user-name-mobile').textContent = currentUser.name + roleBadge;
                document.getElementById('user-email-mobile').textContent = currentUser.email || "No Email Linked";
                document.getElementById('user-avatar-mobile').src = currentUser.avatar;

                // Load API Key setting - Disable input since it's hardcoded
                document.getElementById('custom-api-key').value = "Managed by Firebase Config";
                document.getElementById('custom-api-key').disabled = true;

                if(commentForm) commentForm.classList.remove('hidden');
                if(loginToComment) loginToComment.classList.add('hidden');

                if (currentUser.email) {
                    navYours.classList.remove('hidden');
                    mobileNavYours.classList.remove('hidden');
                } else {
                    navYours.classList.add('hidden');
                    mobileNavYours.classList.add('hidden');
                    if (currentView === 'yours') switchView('home');
                }

            } else {
                // Logged Out
                desktopAuth.classList.remove('hidden');
                desktopProfile.classList.add('hidden');
                mobileAuth.classList.remove('hidden');
                mobileProfile.classList.add('hidden');

                if(commentForm) commentForm.classList.add('hidden');
                if(loginToComment) loginToComment.classList.remove('hidden');

                navYours.classList.add('hidden');
                mobileNavYours.classList.add('hidden');
                if (currentView === 'yours') switchView('home');
            }
        }

        // --- Comments Logic ---
        function renderComments(postId) {
            const commentsList = document.getElementById('comments-list');
            commentsList.innerHTML = '<p class="text-gray-400 text-sm text-center">Loading comments...</p>';
            
            if (commentsUnsubscribe) commentsUnsubscribe();

            commentsUnsubscribe = FirebaseService.listenToComments(postId, (comments) => {
                if (comments.length === 0) {
                    commentsList.innerHTML = '<p class="text-gray-400 text-sm text-center">No comments yet. Be the first!</p>';
                    return;
                }
                commentsList.innerHTML = '';
                comments.forEach(c => {
                    const html = `
                        <div class="flex gap-3">
                            <img src="${c.avatar}" class="w-8 h-8 rounded-full border border-gray-100">
                            <div>
                                <div class="flex items-center gap-2">
                                    <span class="font-bold text-sm text-gray-900">${c.author}</span>
                                    <span class="text-xs text-gray-400">${c.date}</span>
                                </div>
                                <p class="text-gray-600 text-sm mt-1">${c.text}</p>
                            </div>
                        </div>
                    `;
                    commentsList.innerHTML += html;
                });
            });
        }

        window.handlePostComment = function() {
            const input = document.getElementById('comment-input');
            const text = input.value.trim();
            
            if (!text || !currentPostId) return;

            if (!currentUser) {
                alert("Please log in to comment.");
                return;
            }

            if (!currentUser.email) {
                alert("Verification Required: You must have an email address linked to your account to post comments. Please create a new account with an email.");
                return;
            }

            if (checkProfanity(text)) {
                if (currentUser.email) banUser(currentUser.email, 'abuse');
                banUser(currentUser.name, 'abuse');
                input.value = ""; 
                return;
            }

            const newComment = {
                postId: currentPostId,
                author: currentUser.name,
                avatar: currentUser.avatar,
                text: text,
                date: "Just now"
            };
            
            FirebaseService.saveComment(newComment);
            input.value = ""; 
            showToast("Comment Posted!");
        }

        // --- Reviews Logic ---
        const defaultReviews = [
            {
                name: "Priya Sharma",
                role: "User",
                text: "The strict guidelines here actually make the community so much better. It's rare to find a tech blog with such high-quality discussions and zero toxicity. Love the content!",
                rating: 5,
                avatar: "https://ui-avatars.com/api/?name=Priya+Sharma&background=random"
            },
            {
                name: "Rahul Verma",
                role: "User",
                text: "I've bookmarked this site. The articles on productivity and debugging are gold. Simple, clean UI and the content is always straight to the point.",
                rating: 5,
                avatar: "https://ui-avatars.com/api/?name=Rahul+Verma&background=random"
            },
            {
                name: "Anjali Gupta",
                role: "User",
                text: "Finally, a blog platform that respects the reader. No clutter, fast loading, and the 'Custom Post' verification ensures real people are commenting. 10/10.",
                rating: 4,
                avatar: "https://ui-avatars.com/api/?name=Anjali+Gupta&background=random"
            }
        ];

        // Init Review Listener
        FirebaseService.listenToReviews((fetchedReviews) => {
            const container = document.getElementById('reviews-container');
            if (!container) return;
            container.innerHTML = '';

            const displayReviews = fetchedReviews.length > 0 ? fetchedReviews : defaultReviews;

            displayReviews.forEach(review => {
                let starsHtml = '';
                const fullStars = Math.floor(review.rating);
                const hasHalf = review.rating % 1 !== 0;

                for(let i=0; i<fullStars; i++) starsHtml += '<i class="ph-fill ph-star"></i>';
                if(hasHalf) starsHtml += '<i class="ph-fill ph-star-half"></i>';
                
                const html = `
                    <div class="bg-white p-8 rounded-2xl shadow-sm border border-gray-100 relative hover:shadow-md transition-shadow">
                        <div class="text-brand-500 text-4xl absolute top-6 right-6 opacity-20">
                            <i class="ph-fill ph-quotes"></i>
                        </div>
                        <div class="flex items-center gap-4 mb-6">
                            <img src="${review.avatar}" class="w-12 h-12 rounded-full border-2 border-white shadow-sm">
                            <div>
                                <h4 class="font-bold text-gray-900">${review.name}</h4>
                                <p class="text-xs text-gray-500 uppercase tracking-wide">${review.role}</p>
                            </div>
                        </div>
                        <p class="text-gray-600 leading-relaxed italic">"${review.text}"</p>
                        <div class="flex text-yellow-400 mt-4 text-sm gap-1">
                            ${starsHtml}
                        </div>
                    </div>
                `;
                container.innerHTML += html;
            });
        });

        window.openReviewModal = function() {
            if (!currentUser) {
                alert("Please log in to write a review.");
                openAuthModal('login');
                return;
            }
            document.getElementById('review-modal').classList.remove('hidden');
            setRating(5);
            document.getElementById('review-text').value = '';
        }

        window.closeReviewModal = function() {
            document.getElementById('review-modal').classList.add('hidden');
        }

        window.setRating = function(n) {
            document.getElementById('review-rating').value = n;
            const stars = document.querySelectorAll('.star-btn');
            stars.forEach((star, index) => {
                if (index < n) {
                    star.classList.remove('text-gray-300');
                    star.classList.add('text-yellow-400');
                } else {
                    star.classList.add('text-gray-300');
                    star.classList.remove('text-yellow-400');
                }
            });
        }

        window.handleReviewSubmit = async function(e) {
            e.preventDefault();
            const text = document.getElementById('review-text').value.trim();
            const rating = parseFloat(document.getElementById('review-rating').value);

            if (!currentUser) {
                alert("Please log in.");
                return;
            }

            // Check ban before submitting (using normalized keys)
            const lowerEmailKey = currentUser.email ? currentUser.email.toLowerCase().replace('.', '_') : '';
            const lowerNameKey = currentUser.name.toLowerCase().replace('.', '_');

            if ((currentUser.email && localBans[lowerEmailKey]) || localBans[lowerNameKey]) {
                logout();
                showBanModal(currentUser.email || currentUser.name);
                return;
            }

            if (checkProfanity(text)) {
                if (currentUser.email) banUser(currentUser.email, 'abuse');
                banUser(currentUser.name, 'abuse');
                closeReviewModal();
                return;
            }

            const newReview = {
                name: currentUser.name,
                role: "User",
                text: text,
                rating: rating,
                avatar: currentUser.avatar
            };

            FirebaseService.saveReview(newReview);
            closeReviewModal();
            showToast("Review Saved Successfully!");
        }

        window.toggleUserDropdown = function() {
            const dropdown = document.getElementById('user-dropdown');
            dropdown.classList.toggle('hidden');
        }

        // --- API Key / Settings Logic ---
        window.openSettingsModal = function() {
            document.getElementById('settings-modal').classList.remove('hidden');
            document.getElementById('user-dropdown').classList.add('hidden'); 
            const storedKey = localStorage.getItem('lumina_custom_api_key');
            document.getElementById('custom-api-key').value = storedKey || '';
        }

        window.closeSettingsModal = function() {
            document.getElementById('settings-modal').classList.add('hidden');
        }

        window.saveSettings = function(e) {
            e.preventDefault();
            alert(`Settings are managed by site configuration.`);
            closeSettingsModal();
        }

        // --- Auth Modal UI Logic ---
        let isLoginMode = true;

        window.openAuthModal = function(mode) {
            const modal = document.getElementById('auth-modal');
            const title = document.getElementById('auth-title');
            const subtitle = document.getElementById('auth-subtitle');
            const loginForm = document.getElementById('login-form');
            const signupForm = document.getElementById('signup-form');
            const switchBtn = document.getElementById('auth-switch-btn');
            const switchText = document.getElementById('auth-switch-text');

            isLoginMode = (mode === 'login');
            updateModalContent();
            modal.classList.remove('hidden');
        }

        window.closeAuthModal = function() {
            document.getElementById('auth-modal').classList.add('hidden');
        }

        window.toggleAuthMode = function() {
            isLoginMode = !isLoginMode;
            updateModalContent();
        }

        function updateModalContent() {
            const title = document.getElementById('auth-title');
            const subtitle = document.getElementById('auth-subtitle');
            const loginForm = document.getElementById('login-form');
            const signupForm = document.getElementById('signup-form');
            const switchBtn = document.getElementById('auth-switch-btn');
            const switchText = document.getElementById('auth-switch-text');

            if (isLoginMode) {
                title.textContent = "Welcome Back";
                subtitle.textContent = "Please enter your details to continue.";
                loginForm.classList.remove('hidden');
                signupForm.classList.add('hidden');
                switchText.textContent = "Don't have an account?";
                switchBtn.textContent = "Sign Up";
            } else {
                title.textContent = "Create Account";
                subtitle.textContent = "Join our community of creators today.";
                loginForm.classList.add('hidden');
                signupForm.classList.remove('hidden');
                switchText.textContent = "Already have an account?";
                switchBtn.textContent = "Sign In";
            }
        }

        // --- Existing Blog Logic & Pagination ---
        const indianNames = [
            "Aarav Patel", "Diya Sharma", "Vihaan Gupta", "Ananya Singh", "Aditya Kumar", 
            "Saanvi Reddy", "Arjun Verma", "Myra Joshi", "Reyansh Malhotra", "Pari Iyer", 
            "Sai Karthik", "Shanaya Kapoor", "Muhammad Khan", "Naira Mehta", "Avyaan Nair", 
            "Ishaan Choudhury", "Kiara Saxena", "Dhruv Bhatia", "Riya Das", "Kabir Joshi",
            "Rohan Mehra", "Sanya Malhotra", "Vikram Rathore", "Neha Kakkar", "Amitabh Bachan",
            "Kavya Krishnan", "Manish Malhotra", "Pooja Hegde", "Rahul Dravid", "Suresh Raina"
        ];

        // 50 Unique Topics with matching images
        const uniqueTopicsList = [
            { title: "The Future of AI in Healthcare", category: "Tech", image: "https://images.unsplash.com/photo-1576091160399-112ba8d25d1d?auto=format&fit=crop&w=800&q=80" },
            { title: "Hidden Gems of Kerala", category: "Travel", image: "https://images.unsplash.com/photo-1602216056096-3b40cc0c9944?auto=format&fit=crop&w=800&q=80" },
            { title: "Mastering CSS Grid", category: "Tech", image: "https://images.unsplash.com/photo-1507721999472-8ed4421c4af2?auto=format&fit=crop&w=800&q=80" },
            { title: "Healthy Eating on a Budget", category: "Life", image: "https://images.unsplash.com/photo-1490645935967-10de6ba17061?auto=format&fit=crop&w=800&q=80" },
            { title: "Startup Lessons from Bangalore", category: "Tech", image: "https://images.unsplash.com/photo-1519389950473-47ba0277781c?auto=format&fit=crop&w=800&q=80" },
            { title: "Yoga for Mental Peace", category: "Life", image: "https://images.unsplash.com/photo-1544367563-12123d8975bd?auto=format&fit=crop&w=800&q=80" },
            { title: "The Magic of Indian Spices", category: "Life", image: "https://images.unsplash.com/photo-1596040033229-a9821ebd058d?auto=format&fit=crop&w=800&q=80" },
            { title: "Digital Nomad Life in Goa", category: "Travel", image: "https://images.unsplash.com/photo-1512343879784-a960bf40e7f2?auto=format&fit=crop&w=800&q=80" },
            { title: "Understanding Blockchain", category: "Tech", image: "https://images.unsplash.com/photo-1621761191319-c6fb62004040?auto=format&fit=crop&w=800&q=80" },
            { title: "Minimalist Living Guide", category: "Life", image: "https://images.unsplash.com/photo-1494438639946-1ebd1d20bf85?auto=format&fit=crop&w=800&q=80" },
            { title: "Trekking in the Himalayas", category: "Travel", image: "https://images.unsplash.com/photo-1464822759023-fed622ff2c3b?auto=format&fit=crop&w=800&q=80" },
            { title: "Modern Web Design Trends", category: "Tech", image: "https://images.unsplash.com/photo-1509395062549-328e47402634?auto=format&fit=crop&w=800&q=80" },
            { title: "Street Food of Mumbai", category: "Life", image: "https://images.unsplash.com/photo-1601050690597-df0568f70950?auto=format&fit=crop&w=800&q=80" },
            { title: "Introduction to Rust", category: "Tech", image: "https://images.unsplash.com/photo-1515879218367-8466d910aaa4?auto=format&fit=crop&w=800&q=80" },
            { title: "Madhubani Art History", category: "Life", image: "https://images.unsplash.com/photo-1550106069-b50a300300f5?auto=format&fit=crop&w=800&q=80" },
            { title: "Sustainable Fashion Tips", category: "Life", image: "https://images.unsplash.com/photo-1483985988355-763728e1935b?auto=format&fit=crop&w=800&q=80" },
            { title: "Best Cafes in Pondicherry", category: "Travel", image: "https://images.unsplash.com/photo-1554118811-1e0d58224f24?auto=format&fit=crop&w=800&q=80" },
            { title: "Indian Classical Music", category: "Life", image: "https://images.unsplash.com/photo-1511671782779-c97d3d27a1d4?auto=format&fit=crop&w=800&q=80" },
            { title: "Python vs JavaScript", category: "Tech", image: "https://images.unsplash.com/photo-1526379095098-d400fd0bf935?auto=format&fit=crop&w=800&q=80" },
            { title: "Mental Health for Devs", category: "Life", image: "https://images.unsplash.com/photo-1493836512294-502baa1986e2?auto=format&fit=crop&w=800&q=80" },
            { title: "Exploring Rann of Kutch", category: "Travel", image: "https://images.unsplash.com/photo-1548013146-72479768bada?auto=format&fit=crop&w=800&q=80" },
            { title: "Impact of 5G Technology", category: "Tech", image: "https://images.unsplash.com/photo-1614064641938-3e840110842d?auto=format&fit=crop&w=800&q=80" },
            { title: "Traditional Weddings", category: "Life", image: "https://images.unsplash.com/photo-1583939003579-730e3918a45a?auto=format&fit=crop&w=800&q=80" },
            { title: "Organic Gardening 101", category: "Life", image: "https://images.unsplash.com/photo-1466692476868-aef1dfb1e735?auto=format&fit=crop&w=800&q=80" },
            { title: "Taj Mahal Architecture", category: "Travel", image: "https://images.unsplash.com/photo-1564507592333-c60657eea523?auto=format&fit=crop&w=800&q=80" },
            { title: "AWS vs Azure Cloud", category: "Tech", image: "https://images.unsplash.com/photo-1451187580459-43490279c0fa?auto=format&fit=crop&w=800&q=80" },
            { title: "Mindfulness at Work", category: "Life", image: "https://images.unsplash.com/photo-1506126613408-eca07ce68773?auto=format&fit=crop&w=800&q=80" },
            { title: "Houseboats of Alleppey", category: "Travel", image: "https://images.unsplash.com/photo-1593693397690-362cb9666fc2?auto=format&fit=crop&w=800&q=80" },
            { title: "React Hooks Explained", category: "Tech", image: "https://images.unsplash.com/photo-1633356122544-f134324a6cee?auto=format&fit=crop&w=800&q=80" },
            { title: "Indian Tea Culture", category: "Life", image: "https://images.unsplash.com/photo-1561336313-0bd5e0b27ec8?auto=format&fit=crop&w=800&q=80" },
            { title: "Cybersecurity Tips", category: "Tech", image: "https://images.unsplash.com/photo-1550751827-4bd374c3f58b?auto=format&fit=crop&w=800&q=80" },
            { title: "Solo Female Travel", category: "Travel", image: "https://images.unsplash.com/photo-1476514525535-07fb3b4ae5f1?auto=format&fit=crop&w=800&q=80" },
            { title: "Time Blocking Guide", category: "Life", image: "https://images.unsplash.com/photo-1484480974693-6ca0a78fb36b?auto=format&fit=crop&w=800&q=80" },
            { title: "Architecture of Jaipur", category: "Travel", image: "https://images.unsplash.com/photo-1477587458883-47145ed94245?auto=format&fit=crop&w=800&q=80" },
            { title: "Introduction to DevOps", category: "Tech", image: "https://images.unsplash.com/photo-1607799275518-dcfdbe386d91?auto=format&fit=crop&w=800&q=80" },
            { title: "Public Speaking Mastery", category: "Life", image: "https://images.unsplash.com/photo-1475721027760-44226c378f1c?auto=format&fit=crop&w=800&q=80" },
            { title: "Safari in Ranthambore", category: "Travel", image: "https://images.unsplash.com/photo-1560969184-10fe8719e047?auto=format&fit=crop&w=800&q=80" },
            { title: "Understanding NFTs", category: "Tech", image: "https://images.unsplash.com/photo-1620321023374-d1a68fddadb3?auto=format&fit=crop&w=800&q=80" },
            { title: "Home Workout Plans", category: "Life", image: "https://images.unsplash.com/photo-1517836357463-d25dfeac3438?auto=format&fit=crop&w=800&q=80" },
            { title: "South India Temples", category: "Travel", image: "https://images.unsplash.com/photo-1582510003544-4d00b7f0bd44?auto=format&fit=crop&w=800&q=80" },
            { title: "Building Scalable APIs", category: "Tech", image: "https://images.unsplash.com/photo-1558494949-ef253b795246?auto=format&fit=crop&w=800&q=80" },
            { title: "The Joy of Pottery", category: "Life", image: "https://images.unsplash.com/photo-1565193566173-7a64b27876e9?auto=format&fit=crop&w=800&q=80" },
            { title: "Varanasi: Spiritual Capital", category: "Travel", image: "https://images.unsplash.com/photo-1561361513-2d000a50f0dc?auto=format&fit=crop&w=800&q=80" },
            { title: "Agile Methodology", category: "Tech", image: "https://images.unsplash.com/photo-1531403009284-440f080d1e12?auto=format&fit=crop&w=800&q=80" },
            { title: "Summer Detox Drinks", category: "Life", image: "https://images.unsplash.com/photo-1513558161293-cdaf765ed2fd?auto=format&fit=crop&w=800&q=80" },
            { title: "Scuba Diving in Andaman", category: "Travel", image: "https://images.unsplash.com/photo-1544551763-46a013bb70d5?auto=format&fit=crop&w=800&q=80" },
            { title: "Machine Learning Basics", category: "Tech", image: "https://images.unsplash.com/photo-1555255707-c07966088b7b?auto=format&fit=crop&w=800&q=80" },
            { title: "Indian Train Journeys", category: "Travel", image: "https://images.unsplash.com/photo-1474487548417-781cb71495f3?auto=format&fit=crop&w=800&q=80" },
            { title: "Financial Planning Tips", category: "Life", image: "https://images.unsplash.com/photo-1579621970563-ebec7560ff3e?auto=format&fit=crop&w=800&q=80" },
            { title: "Zero Waste Lifestyle", category: "Life", image: "https://images.unsplash.com/photo-1532996122724-e3c354a0b15b?auto=format&fit=crop&w=800&q=80" }
        ];

        function generateRandomPosts() {
            // Check if seeded data exists (simple check for consistency)
            const existingSeed = localStorage.getItem('lumina_posts_seed');
            let seededPosts = [];
            
            if (existingSeed) {
                try {
                    const parsed = JSON.parse(existingSeed);
                    // If we have valid seed data of roughly correct length, use it
                    if (parsed.length === uniqueTopicsList.length) seededPosts = parsed;
                } catch(e) {}
            }

            if (seededPosts.length > 0) return seededPosts;

            const newPosts = [];
            
            // Loop through the UNIQUE list directly
            for (let i = 0; i < uniqueTopicsList.length; i++) {
                const topic = uniqueTopicsList[i];
                const randomName = indianNames[i % indianNames.length]; // Cycle names
                
                newPosts.push({
                    id: 100 + i,
                    title: topic.title,
                    excerpt: `Join ${randomName} as they explore ${topic.title}. Discover key insights, practical tips, and a fresh perspective on ${topic.category.toLowerCase()}.`,
                    views: Math.floor(Math.random() * 5000) + 150,
                    content: `
                        <div class="space-y-6 text-gray-700">
                            <p class="leading-relaxed first-letter:text-5xl first-letter:font-bold first-letter:text-brand-600 first-letter:mr-3 first-letter:float-left">
                                Welcome to this comprehensive guide on <strong>${topic.title}</strong>. In recent years, we have seen a massive shift in how people perceive this subject, especially within the context of ${topic.category}.
                            </p>
                            <h3 class="text-2xl font-bold text-gray-900 mt-8 mb-4 font-serif">Why This Matters</h3>
                            <p class="leading-relaxed">
                                Whether you are a beginner or an expert, understanding the core principles is crucial. I've spent the last few months researching this topic extensively.
                            </p>
                            <div class="my-8">
                                <img src="${topic.image}" class="w-full h-64 object-cover rounded-xl shadow-md" alt="${topic.title}">
                                <p class="text-xs text-gray-500 mt-2 text-center">Visual representation of ${topic.title}</p>
                            </div>
                            <h3 class="text-2xl font-bold text-gray-900 mt-8 mb-4 font-serif">Key Takeaways</h3>
                            <ul class="list-disc pl-6 space-y-2 bg-gray-50 p-6 rounded-xl border border-gray-100 my-4">
                                <li><strong>Insight 1:</strong> Always stay updated with the latest trends in ${topic.category}.</li>
                                <li><strong>Insight 2:</strong> Practice consistency. Success doesn't happen overnight.</li>
                                <li><strong>Insight 3:</strong> Community feedback is invaluable. Listen to your peers.</li>
                            </ul>
                            <p class="leading-relaxed">
                                I hope this article helps you in your journey. If you found this useful, please consider subscribing to the newsletter or checking out my other posts on ${topic.category}.
                            </p>
                        </div>
                    `,
                    category: topic.category,
                    author: randomName,
                    date: new Date(Date.now() - Math.floor(Math.random() * 10000000000)).toLocaleDateString('en-US', { month: 'short', day: 'numeric', year: 'numeric' }),
                    image: topic.image,
                    authorImg: `https://ui-avatars.com/api/?name=${randomName.replace(' ', '+')}&background=random`
                });
            }
            
            localStorage.setItem('lumina_posts_seed', JSON.stringify(newPosts));
            return newPosts;
        }

        const generatedPosts = generateRandomPosts();

        const posts = [
            // ... (Static posts remain the same)
            {
                id: 1,
                title: "Welcome to My Blog",
                // ... rest of static post 1
                excerpt: "Hi, welcome to Prathamer's blog! Use your own thinking and convert your dream ideas into reality. The good news is, it's completely free.",
                views: 1240, 
                content: `
                    <div class="space-y-6 text-gray-700">
                        <p class="first-letter:text-5xl first-letter:font-bold first-letter:text-brand-600 first-letter:mr-3 first-letter:float-left leading-relaxed">
                            Hi, and a warm welcome to Prathamer's blog! This platform is more than just a collection of digital pages; itâs a canvas where imagination meets execution. The core philosophy here is simple yet powerful: <strong>use your own thinking to convert your dream ideas into reality</strong>. We often get stuck in the planning phase, paralyzed by the sheer scale of our ambitions or the fear of the unknown. But here, we believe that every great software, every innovative design, and every impactful project started as a fragile little thought in someone's mind. The bridge between that thought and a tangible reality is action, and that's exactly what this blog is about.
                        </p>
                        <h3 class="text-2xl font-bold text-gray-900 mt-8 mb-4 font-serif">Democratizing Knowledge</h3>
                        <p class="leading-relaxed">The good news is, accessing this knowledge and community is <strong>completely free</strong>. I believe that information should be democratized.</p>
                        <h3 class="text-2xl font-bold text-gray-900 mt-8 mb-4 font-serif">What to Expect</h3>
                        <p class="leading-relaxed">In the coming weeks and months, you can expect a wide variety of content. I'll be diving deep into modern web development.</p>
                        <ul class="list-disc pl-6 space-y-2 bg-gray-50 p-6 rounded-xl border border-gray-100 my-4">
                            <li><strong class="text-brand-600">Productivity & Mindset</strong></li>
                            <li><strong class="text-brand-600">Design Principles</strong></li>
                            <li><strong class="text-brand-600">Career Advice</strong></li>
                        </ul>
                    </div>`,
                category: "Personal",
                author: "Admin",
                date: "Oct 24, 2023",
                image: "https://images.unsplash.com/photo-1499750310159-529800cf2c5a?ixlib=rb-1.2.1&auto=format&fit=crop&w=800&q=80",
                authorImg: "https://ui-avatars.com/api/?name=Admin&background=random"
            },
            {
                id: 2,
                title: "Reflections on Early Coding Days",
                excerpt: "Looking back at my first few projects, I realize how much the web landscape has changed. Here are some lessons from 2023.",
                views: 12, 
                content: `<div class="space-y-6 text-gray-700"><p class="leading-relaxed">It's fascinating to look back at code written just a year or two ago.</p></div>`,
                category: "Personal",
                author: "Hershit",
                date: "Jan 01, 2023",
                image: "https://images.unsplash.com/photo-1434030216411-0b793f4b4173?ixlib=rb-1.2.1&auto=format&fit=crop&w=800&q=80",
                authorImg: "https://ui-avatars.com/api/?name=Hershit&background=random"
            },
            {
                id: 3,
                title: "The Art of Debugging",
                excerpt: "Debugging is more than just fixing errors; it's a mindset. Here is how I approach complex problems in code.",
                views: 342,
                content: `<div class="space-y-6 text-gray-700"><p class="leading-relaxed">Every developer knows the feeling: you've written what you think is the perfect block of code, you hit run, and... red text everywhere.</p></div>`,
                category: "Tech",
                author: "Hitesh Kumar",
                date: "Nov 15, 2023",
                image: "https://images.unsplash.com/photo-1555066931-4365d14bab8c?ixlib=rb-1.2.1&auto=format&fit=crop&w=800&q=80",
                authorImg: "https://ui-avatars.com/api/?name=Hitesh+Kumar&background=random"
            },
            ...generatedPosts
        ];
        
        // ... (Rest of the logic remains the same)
        const postsContainer = document.getElementById('posts-container');
